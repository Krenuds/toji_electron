<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.1 (20241206.2353)
 -->
<!-- Title: startup_failure Pages: 1 -->
<svg width="1029pt" height="1504pt"
 viewBox="0.00 0.00 1029.00 1503.88" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1499.88)">
<title>startup_failure</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1499.88 1025,-1499.88 1025,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_startup</title>
<polygon fill="lightgrey" stroke="lightgrey" points="144,-701.62 144,-1152.88 474,-1152.88 474,-701.62 144,-701.62"/>
<text text-anchor="middle" x="309" y="-1135.58" font-family="Times New Roman,serif" font-size="14.00">src/main/index.ts &#45; APP STARTUP</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_config</title>
<polygon fill="lightblue" stroke="lightblue" points="8,-1220.38 8,-1487.88 342,-1487.88 342,-1220.38 8,-1220.38"/>
<text text-anchor="middle" x="175" y="-1470.58" font-family="Times New Roman,serif" font-size="14.00">src/main/config/ConfigProvider.ts</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_server</title>
<polygon fill="lightyellow" stroke="lightyellow" points="535,-131.25 535,-805.25 1013,-805.25 1013,-131.25 535,-131.25"/>
<text text-anchor="middle" x="774" y="-787.95" font-family="Times New Roman,serif" font-size="14.00">src/main/toji/server.ts &#45; ServerManager</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_result</title>
<polygon fill="#ffcccc" stroke="#ffcccc" points="309,-363 309,-634.12 527,-634.12 527,-363 309,-363"/>
<text text-anchor="middle" x="418" y="-616.83" font-family="Times New Roman,serif" font-size="14.00">Result: App Running But Broken</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_legend</title>
<polygon fill="none" stroke="black" points="471,-1393.88 471,-1470.38 899,-1470.38 899,-1393.88 471,-1393.88"/>
<text text-anchor="middle" x="685" y="-1453.08" font-family="Times New Roman,serif" font-size="14.00">Legend</text>
</g>
<!-- startup -->
<g id="node1" class="node">
<title>startup</title>
<path fill="yellow" stroke="black" d="M453.5,-1120.38C453.5,-1120.38 164.5,-1120.38 164.5,-1120.38 158.5,-1120.38 152.5,-1114.38 152.5,-1108.38 152.5,-1108.38 152.5,-1077.12 152.5,-1077.12 152.5,-1071.12 158.5,-1065.12 164.5,-1065.12 164.5,-1065.12 453.5,-1065.12 453.5,-1065.12 459.5,-1065.12 465.5,-1071.12 465.5,-1077.12 465.5,-1077.12 465.5,-1108.38 465.5,-1108.38 465.5,-1114.38 459.5,-1120.38 453.5,-1120.38"/>
<text text-anchor="middle" x="309" y="-1103.08" font-family="Helvetica,sans-Serif" font-size="14.00">Line 138:</text>
<text text-anchor="middle" x="309" y="-1087.33" font-family="Helvetica,sans-Serif" font-size="14.00">const lastProject = config.getCurrentProjectPath()</text>
<text text-anchor="middle" x="309" y="-1071.58" font-family="Helvetica,sans-Serif" font-size="14.00">|| config.getOpencodeWorkingDirectory()</text>
</g>
<!-- check -->
<g id="node2" class="node">
<title>check</title>
<path fill="red" stroke="black" d="M433,-1012.62C433,-1012.62 201,-1012.62 201,-1012.62 195,-1012.62 189,-1006.62 189,-1000.62 189,-1000.62 189,-985.12 189,-985.12 189,-979.12 195,-973.12 201,-973.12 201,-973.12 433,-973.12 433,-973.12 439,-973.12 445,-979.12 445,-985.12 445,-985.12 445,-1000.62 445,-1000.62 445,-1006.62 439,-1012.62 433,-1012.62"/>
<text text-anchor="middle" x="317" y="-995.33" font-family="Helvetica,sans-Serif" font-size="14.00">‚ùå MISSING:</text>
<text text-anchor="middle" x="317" y="-979.58" font-family="Helvetica,sans-Serif" font-size="14.00">No validation if lastProject exists on disk</text>
</g>
<!-- startup&#45;&gt;check -->
<g id="edge1" class="edge">
<title>startup&#45;&gt;check</title>
<path fill="none" stroke="black" d="M311.21,-1064.75C312.23,-1052.18 313.46,-1037.19 314.52,-1024.23"/>
<polygon fill="black" stroke="black" points="317.98,-1024.8 315.31,-1014.55 311.01,-1024.23 317.98,-1024.8"/>
<text text-anchor="middle" x="342.08" y="-1033.83" font-family="Times New Roman,serif" font-size="14.00">No check!</text>
</g>
<!-- get_current -->
<g id="node5" class="node">
<title>get_current</title>
<path fill="yellow" stroke="black" d="M311.88,-1455.38C311.88,-1455.38 58.12,-1455.38 58.12,-1455.38 52.12,-1455.38 46.12,-1449.38 46.12,-1443.38 46.12,-1443.38 46.12,-1396.38 46.12,-1396.38 46.12,-1390.38 52.12,-1384.38 58.12,-1384.38 58.12,-1384.38 311.88,-1384.38 311.88,-1384.38 317.88,-1384.38 323.88,-1390.38 323.88,-1396.38 323.88,-1396.38 323.88,-1443.38 323.88,-1443.38 323.88,-1449.38 317.88,-1455.38 311.88,-1455.38"/>
<text text-anchor="middle" x="185" y="-1438.08" font-family="Helvetica,sans-Serif" font-size="14.00">Line 240:</text>
<text text-anchor="middle" x="185" y="-1422.33" font-family="Helvetica,sans-Serif" font-size="14.00">getCurrentProjectPath(): string | undefined {</text>
<text text-anchor="middle" x="185" y="-1406.58" font-family="Helvetica,sans-Serif" font-size="14.00"> &#160;return this.store.get(&#39;projects.current&#39;)</text>
<text text-anchor="middle" x="185" y="-1390.83" font-family="Helvetica,sans-Serif" font-size="14.00">}</text>
</g>
<!-- startup&#45;&gt;get_current -->
<g id="edge12" class="edge">
<title>startup&#45;&gt;get_current</title>
<path fill="none" stroke="black" d="M333.58,-1120.74C342.46,-1132.25 351.42,-1146.36 356,-1160.88 376.72,-1226.6 378.92,-1256.57 343,-1315.38 327.08,-1341.43 301.85,-1362.22 276.17,-1378.13"/>
<polygon fill="black" stroke="black" points="274.43,-1375.1 267.63,-1383.22 278.01,-1381.11 274.43,-1375.1"/>
<text text-anchor="middle" x="384.81" y="-1266.83" font-family="Times New Roman,serif" font-size="14.00">Calls</text>
</g>
<!-- server_start -->
<g id="node3" class="node">
<title>server_start</title>
<path fill="yellow" stroke="black" d="M443.88,-896.25C443.88,-896.25 190.12,-896.25 190.12,-896.25 184.12,-896.25 178.12,-890.25 178.12,-884.25 178.12,-884.25 178.12,-868.75 178.12,-868.75 178.12,-862.75 184.12,-856.75 190.12,-856.75 190.12,-856.75 443.88,-856.75 443.88,-856.75 449.88,-856.75 455.88,-862.75 455.88,-868.75 455.88,-868.75 455.88,-884.25 455.88,-884.25 455.88,-890.25 449.88,-896.25 443.88,-896.25"/>
<text text-anchor="middle" x="317" y="-878.95" font-family="Helvetica,sans-Serif" font-size="14.00">Line 165:</text>
<text text-anchor="middle" x="317" y="-863.2" font-family="Helvetica,sans-Serif" font-size="14.00">await toji.server.start(undefined, lastProject)</text>
</g>
<!-- check&#45;&gt;server_start -->
<g id="edge2" class="edge">
<title>check&#45;&gt;server_start</title>
<path fill="none" stroke="black" d="M317,-972.73C317,-955.08 317,-928.59 317,-908.02"/>
<polygon fill="black" stroke="black" points="320.5,-908.22 317,-898.22 313.5,-908.22 320.5,-908.22"/>
<text text-anchor="middle" x="383" y="-941.83" font-family="Times New Roman,serif" font-size="14.00">Passes stale path:</text>
<text text-anchor="middle" x="383" y="-925.33" font-family="Times New Roman,serif" font-size="14.00">C:/Users/donth/testwork</text>
</g>
<!-- fix1 -->
<g id="node16" class="node">
<title>fix1</title>
<polygon fill="lightblue" stroke="black" points="622.25,-904.12 481.75,-904.12 481.75,-848.88 628.25,-848.88 628.25,-898.12 622.25,-904.12"/>
<polyline fill="none" stroke="black" points="622.25,-904.12 622.25,-898.12"/>
<polyline fill="none" stroke="black" points="628.25,-898.12 622.25,-898.12"/>
<text text-anchor="middle" x="555" y="-886.83" font-family="Helvetica,sans-Serif" font-size="14.00">FIX 1 (Prevention):</text>
<text text-anchor="middle" x="555" y="-871.08" font-family="Helvetica,sans-Serif" font-size="14.00">Validate project exists</text>
<text text-anchor="middle" x="555" y="-855.33" font-family="Helvetica,sans-Serif" font-size="14.00">before server.start()</text>
</g>
<!-- check&#45;&gt;fix1 -->
<g id="edge17" class="edge">
<title>check&#45;&gt;fix1</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M407.69,-972.64C423.19,-967.88 438.85,-962.09 453,-955.12 475.99,-943.81 498.94,-926.97 517.23,-911.86"/>
<polygon fill="blue" stroke="blue" points="519.27,-914.72 524.66,-905.59 514.76,-909.37 519.27,-914.72"/>
<text text-anchor="middle" x="528.19" y="-933.58" font-family="Times New Roman,serif" font-size="14.00">Add here</text>
</g>
<!-- catch_block -->
<g id="node4" class="node">
<title>catch_block</title>
<path fill="red" stroke="black" d="M405.38,-796.38C405.38,-796.38 184.62,-796.38 184.62,-796.38 178.62,-796.38 172.62,-790.38 172.62,-784.38 172.62,-784.38 172.62,-721.62 172.62,-721.62 172.62,-715.62 178.62,-709.62 184.62,-709.62 184.62,-709.62 405.38,-709.62 405.38,-709.62 411.38,-709.62 417.38,-715.62 417.38,-721.62 417.38,-721.62 417.38,-784.38 417.38,-784.38 417.38,-790.38 411.38,-796.38 405.38,-796.38"/>
<text text-anchor="middle" x="295" y="-779.08" font-family="Helvetica,sans-Serif" font-size="14.00">Line 196&#45;198:</text>
<text text-anchor="middle" x="295" y="-763.33" font-family="Helvetica,sans-Serif" font-size="14.00">catch (error) {</text>
<text text-anchor="middle" x="295" y="-747.58" font-family="Helvetica,sans-Serif" font-size="14.00"> &#160;logger.debug(...)</text>
<text text-anchor="middle" x="295" y="-731.83" font-family="Helvetica,sans-Serif" font-size="14.00"> &#160;throw error &#160;// App continues running!</text>
<text text-anchor="middle" x="295" y="-716.08" font-family="Helvetica,sans-Serif" font-size="14.00">}</text>
</g>
<!-- server_start&#45;&gt;catch_block -->
<g id="edge3" class="edge">
<title>server_start&#45;&gt;catch_block</title>
<path fill="none" stroke="black" d="M313.56,-856.52C311.19,-843.43 307.92,-825.33 304.78,-807.98"/>
<polygon fill="black" stroke="black" points="308.24,-807.46 303.01,-798.24 301.35,-808.7 308.24,-807.46"/>
<text text-anchor="middle" x="356.62" y="-817.58" font-family="Times New Roman,serif" font-size="14.00">ENOENT thrown</text>
</g>
<!-- get_or_create -->
<g id="node7" class="node">
<title>get_or_create</title>
<path fill="lightgreen" stroke="black" d="M773.12,-772.75C773.12,-772.75 562.88,-772.75 562.88,-772.75 556.88,-772.75 550.88,-766.75 550.88,-760.75 550.88,-760.75 550.88,-745.25 550.88,-745.25 550.88,-739.25 556.88,-733.25 562.88,-733.25 562.88,-733.25 773.12,-733.25 773.12,-733.25 779.12,-733.25 785.12,-739.25 785.12,-745.25 785.12,-745.25 785.12,-760.75 785.12,-760.75 785.12,-766.75 779.12,-772.75 773.12,-772.75"/>
<text text-anchor="middle" x="668" y="-755.45" font-family="Helvetica,sans-Serif" font-size="14.00">Line 44:</text>
<text text-anchor="middle" x="668" y="-739.7" font-family="Helvetica,sans-Serif" font-size="14.00">getOrCreateServer(directory, config)</text>
</g>
<!-- server_start&#45;&gt;get_or_create -->
<g id="edge14" class="edge">
<title>server_start&#45;&gt;get_or_create</title>
<path fill="none" stroke="black" d="M372.23,-856.38C434.41,-834.86 535.4,-799.9 601.76,-776.93"/>
<polygon fill="black" stroke="black" points="602.78,-780.28 611.08,-773.7 600.49,-773.67 602.78,-780.28"/>
<text text-anchor="middle" x="525.12" y="-817.58" font-family="Times New Roman,serif" font-size="14.00">Forwards to</text>
</g>
<!-- no_server -->
<g id="node13" class="node">
<title>no_server</title>
<path fill="red" stroke="black" d="M500.5,-601.62C500.5,-601.62 331.5,-601.62 331.5,-601.62 325.5,-601.62 319.5,-595.62 319.5,-589.62 319.5,-589.62 319.5,-577.62 319.5,-577.62 319.5,-571.62 325.5,-565.62 331.5,-565.62 331.5,-565.62 500.5,-565.62 500.5,-565.62 506.5,-565.62 512.5,-571.62 512.5,-577.62 512.5,-577.62 512.5,-589.62 512.5,-589.62 512.5,-595.62 506.5,-601.62 500.5,-601.62"/>
<text text-anchor="middle" x="416" y="-578.2" font-family="Helvetica,sans-Serif" font-size="14.00">No OpenCode server running</text>
</g>
<!-- catch_block&#45;&gt;no_server -->
<g id="edge16" class="edge">
<title>catch_block&#45;&gt;no_server</title>
<path fill="none" stroke="black" d="M325.85,-709.33C348.3,-678.28 377.98,-637.21 397.04,-610.85"/>
<polygon fill="black" stroke="black" points="399.64,-613.23 402.66,-603.08 393.96,-609.13 399.64,-613.23"/>
<text text-anchor="middle" x="412.41" y="-678.33" font-family="Times New Roman,serif" font-size="14.00">Error logged,</text>
<text text-anchor="middle" x="412.41" y="-661.83" font-family="Times New Roman,serif" font-size="14.00">app continues</text>
<text text-anchor="middle" x="412.41" y="-645.33" font-family="Times New Roman,serif" font-size="14.00">without server</text>
</g>
<!-- fix2 -->
<g id="node17" class="node">
<title>fix2</title>
<polygon fill="lightblue" stroke="black" points="207.38,-611.25 34.62,-611.25 34.62,-556 213.38,-556 213.38,-605.25 207.38,-611.25"/>
<polyline fill="none" stroke="black" points="207.38,-611.25 207.38,-605.25"/>
<polyline fill="none" stroke="black" points="213.38,-605.25 207.38,-605.25"/>
<text text-anchor="middle" x="124" y="-593.95" font-family="Helvetica,sans-Serif" font-size="14.00">FIX 2 (Fallback):</text>
<text text-anchor="middle" x="124" y="-578.2" font-family="Helvetica,sans-Serif" font-size="14.00">If server.start() fails,</text>
<text text-anchor="middle" x="124" y="-562.45" font-family="Helvetica,sans-Serif" font-size="14.00">start global server on CWD</text>
</g>
<!-- catch_block&#45;&gt;fix2 -->
<g id="edge18" class="edge">
<title>catch_block&#45;&gt;fix2</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M197.75,-709.2C190.2,-703.88 183.06,-698.03 176.75,-691.62 157.72,-672.32 144.36,-644.79 135.84,-622.48"/>
<polygon fill="blue" stroke="blue" points="139.15,-621.33 132.46,-613.12 132.57,-623.71 139.15,-621.33"/>
<text text-anchor="middle" x="201.88" y="-661.83" font-family="Times New Roman,serif" font-size="14.00">Add here</text>
</g>
<!-- store -->
<g id="node6" class="node">
<title>store</title>
<path fill="red" stroke="black" d="M321.75,-1315.38C321.75,-1315.38 28.25,-1315.38 28.25,-1315.38 22.25,-1315.38 16.25,-1309.38 16.25,-1303.38 16.25,-1303.38 16.25,-1240.38 16.25,-1240.38 16.25,-1234.38 22.25,-1228.38 28.25,-1228.38 28.25,-1228.38 321.75,-1228.38 321.75,-1228.38 327.75,-1228.38 333.75,-1234.38 333.75,-1240.38 333.75,-1240.38 333.75,-1303.38 333.75,-1303.38 333.75,-1309.38 327.75,-1315.38 321.75,-1315.38"/>
<text text-anchor="middle" x="175" y="-1298.08" font-family="Helvetica,sans-Serif" font-size="14.00">electron&#45;store</text>
<text text-anchor="middle" x="175" y="-1282.33" font-family="Helvetica,sans-Serif" font-size="14.00">C:/Users/donth/AppData/Roaming/toji3/config.json</text>
<text text-anchor="middle" x="175" y="-1250.58" font-family="Helvetica,sans-Serif" font-size="14.00">Stored value: &#39;C:/Users/donth/testwork&#39;</text>
<text text-anchor="middle" x="175" y="-1234.83" font-family="Helvetica,sans-Serif" font-size="14.00">(directory was DELETED)</text>
</g>
<!-- get_current&#45;&gt;store -->
<g id="edge4" class="edge">
<title>get_current&#45;&gt;store</title>
<path fill="none" stroke="black" d="M182.6,-1383.9C181.44,-1366.85 180.01,-1345.95 178.7,-1326.9"/>
<polygon fill="black" stroke="black" points="182.21,-1326.89 178.03,-1317.15 175.22,-1327.36 182.21,-1326.89"/>
<text text-anchor="middle" x="222.81" y="-1353.08" font-family="Times New Roman,serif" font-size="14.00">Reads from</text>
<text text-anchor="middle" x="222.81" y="-1336.58" font-family="Times New Roman,serif" font-size="14.00">encrypted store</text>
</g>
<!-- store&#45;&gt;startup -->
<g id="edge13" class="edge">
<title>store&#45;&gt;startup</title>
<path fill="none" stroke="black" d="M188.56,-1228.03C196.68,-1206.51 208.48,-1180.85 224,-1160.88 233.56,-1148.57 245.85,-1137.2 258.08,-1127.44"/>
<polygon fill="black" stroke="black" points="259.94,-1130.42 265.74,-1121.56 255.68,-1124.87 259.94,-1130.42"/>
<text text-anchor="middle" x="290" y="-1197.08" font-family="Times New Roman,serif" font-size="14.00">Returns:</text>
<text text-anchor="middle" x="290" y="-1180.58" font-family="Times New Roman,serif" font-size="14.00">C:/Users/donth/testwork</text>
<text text-anchor="middle" x="290" y="-1164.08" font-family="Times New Roman,serif" font-size="14.00">(deleted!)</text>
</g>
<!-- normalize -->
<g id="node8" class="node">
<title>normalize</title>
<path fill="lightgreen" stroke="black" d="M822,-603.38C822,-603.38 578,-603.38 578,-603.38 572,-603.38 566,-597.38 566,-591.38 566,-591.38 566,-575.88 566,-575.88 566,-569.88 572,-563.88 578,-563.88 578,-563.88 822,-563.88 822,-563.88 828,-563.88 834,-569.88 834,-575.88 834,-575.88 834,-591.38 834,-591.38 834,-597.38 828,-603.38 822,-603.38"/>
<text text-anchor="middle" x="700" y="-586.08" font-family="Helvetica,sans-Serif" font-size="14.00">targetDirectory = normalizePath(directory)</text>
<text text-anchor="middle" x="700" y="-570.33" font-family="Helvetica,sans-Serif" font-size="14.00">Result: C:/Users/donth/testwork</text>
</g>
<!-- get_or_create&#45;&gt;normalize -->
<g id="edge5" class="edge">
<title>get_or_create&#45;&gt;normalize</title>
<path fill="none" stroke="black" d="M671.67,-732.8C677.18,-704 687.63,-649.33 694.18,-615.06"/>
<polygon fill="black" stroke="black" points="697.6,-615.82 696.04,-605.34 690.72,-614.51 697.6,-615.82"/>
</g>
<!-- spawn_call -->
<g id="node9" class="node">
<title>spawn_call</title>
<path fill="yellow" stroke="black" d="M918.25,-519C918.25,-519 579.75,-519 579.75,-519 573.75,-519 567.75,-513 567.75,-507 567.75,-507 567.75,-491.5 567.75,-491.5 567.75,-485.5 573.75,-479.5 579.75,-479.5 579.75,-479.5 918.25,-479.5 918.25,-479.5 924.25,-479.5 930.25,-485.5 930.25,-491.5 930.25,-491.5 930.25,-507 930.25,-507 930.25,-513 924.25,-519 918.25,-519"/>
<text text-anchor="middle" x="749" y="-501.7" font-family="Helvetica,sans-Serif" font-size="14.00">Line 91:</text>
<text text-anchor="middle" x="749" y="-485.95" font-family="Helvetica,sans-Serif" font-size="14.00">const server = await this.spawnOpenCodeServer(options)</text>
</g>
<!-- normalize&#45;&gt;spawn_call -->
<g id="edge6" class="edge">
<title>normalize&#45;&gt;spawn_call</title>
<path fill="none" stroke="black" d="M711.36,-563.52C717.49,-553.23 725.16,-540.32 731.98,-528.86"/>
<polygon fill="black" stroke="black" points="734.82,-530.94 736.92,-520.55 728.8,-527.36 734.82,-530.94"/>
</g>
<!-- spawn_impl -->
<g id="node10" class="node">
<title>spawn_impl</title>
<path fill="yellow" stroke="black" d="M903.88,-410.5C903.88,-410.5 620.12,-410.5 620.12,-410.5 614.12,-410.5 608.12,-404.5 608.12,-398.5 608.12,-398.5 608.12,-383 608.12,-383 608.12,-377 614.12,-371 620.12,-371 620.12,-371 903.88,-371 903.88,-371 909.88,-371 915.88,-377 915.88,-383 915.88,-383 915.88,-398.5 915.88,-398.5 915.88,-404.5 909.88,-410.5 903.88,-410.5"/>
<text text-anchor="middle" x="762" y="-393.2" font-family="Helvetica,sans-Serif" font-size="14.00">spawnOpenCodeServer(options: ServerOptions)</text>
<text text-anchor="middle" x="762" y="-377.45" font-family="Helvetica,sans-Serif" font-size="14.00">options.cwd = &#39;C:/Users/donth/testwork&#39;</text>
</g>
<!-- spawn_call&#45;&gt;spawn_impl -->
<g id="edge7" class="edge">
<title>spawn_call&#45;&gt;spawn_impl</title>
<path fill="none" stroke="black" d="M751.32,-479.21C753.25,-463.41 756.03,-440.63 758.27,-422.28"/>
<polygon fill="black" stroke="black" points="761.73,-422.84 759.47,-412.49 754.78,-421.99 761.73,-422.84"/>
</g>
<!-- node_spawn -->
<g id="node11" class="node">
<title>node_spawn</title>
<path fill="red" stroke="black" d="M923.12,-334C923.12,-334 616.88,-334 616.88,-334 610.88,-334 604.88,-328 604.88,-322 604.88,-322 604.88,-290.75 604.88,-290.75 604.88,-284.75 610.88,-278.75 616.88,-278.75 616.88,-278.75 923.12,-278.75 923.12,-278.75 929.12,-278.75 935.12,-284.75 935.12,-290.75 935.12,-290.75 935.12,-322 935.12,-322 935.12,-328 929.12,-334 923.12,-334"/>
<text text-anchor="middle" x="770" y="-316.7" font-family="Helvetica,sans-Serif" font-size="14.00">child_process.spawn(&#39;opencode.exe&#39;, [...], {</text>
<text text-anchor="middle" x="770" y="-300.95" font-family="Helvetica,sans-Serif" font-size="14.00"> &#160;cwd: &#39;C:/Users/donth/testwork&#39; &#160;// DOESN&#39;T EXIST!</text>
<text text-anchor="middle" x="770" y="-285.2" font-family="Helvetica,sans-Serif" font-size="14.00">})</text>
</g>
<!-- spawn_impl&#45;&gt;node_spawn -->
<g id="edge8" class="edge">
<title>spawn_impl&#45;&gt;node_spawn</title>
<path fill="none" stroke="black" d="M763.86,-370.64C764.58,-363.18 765.44,-354.33 766.28,-345.66"/>
<polygon fill="black" stroke="black" points="769.74,-346.29 767.22,-336 762.77,-345.61 769.74,-346.29"/>
</g>
<!-- enoent -->
<g id="node12" class="node">
<title>enoent</title>
<path fill="red" stroke="black" d="M992.75,-226.25C992.75,-226.25 555.25,-226.25 555.25,-226.25 549.25,-226.25 543.25,-220.25 543.25,-214.25 543.25,-214.25 543.25,-151.25 543.25,-151.25 543.25,-145.25 549.25,-139.25 555.25,-139.25 555.25,-139.25 992.75,-139.25 992.75,-139.25 998.75,-139.25 1004.75,-145.25 1004.75,-151.25 1004.75,-151.25 1004.75,-214.25 1004.75,-214.25 1004.75,-220.25 998.75,-226.25 992.75,-226.25"/>
<text text-anchor="middle" x="774" y="-208.95" font-family="Helvetica,sans-Serif" font-size="14.00">‚ùå ENOENT Error:</text>
<text text-anchor="middle" x="774" y="-193.2" font-family="Helvetica,sans-Serif" font-size="14.00">&#39;spawn C:\Users\donth\.local\share\opencode\bin\opencode.exe ENOENT&#39;</text>
<text text-anchor="middle" x="774" y="-161.45" font-family="Helvetica,sans-Serif" font-size="14.00">Misleading message!</text>
<text text-anchor="middle" x="774" y="-145.7" font-family="Helvetica,sans-Serif" font-size="14.00">Binary EXISTS, but working directory DOESN&#39;T!</text>
</g>
<!-- node_spawn&#45;&gt;enoent -->
<g id="edge9" class="edge">
<title>node_spawn&#45;&gt;enoent</title>
<path fill="none" stroke="black" d="M770.89,-278.38C771.28,-266.34 771.76,-251.71 772.23,-237.59"/>
<polygon fill="black" stroke="black" points="775.72,-238.06 772.55,-227.95 768.72,-237.82 775.72,-238.06"/>
<text text-anchor="middle" x="808.75" y="-247.45" font-family="Times New Roman,serif" font-size="14.00">Error emitted</text>
</g>
<!-- enoent&#45;&gt;catch_block -->
<g id="edge15" class="edge">
<title>enoent&#45;&gt;catch_block</title>
<path fill="none" stroke="black" d="M542.93,-195.3C398.99,-209.06 241,-239.23 241,-305.38 241,-584.62 241,-584.62 241,-584.62 241,-624.13 254.79,-666.45 268.44,-698.65"/>
<polygon fill="black" stroke="black" points="265.21,-700.02 272.43,-707.78 271.63,-697.22 265.21,-700.02"/>
<text text-anchor="middle" x="271" y="-448.2" font-family="Times New Roman,serif" font-size="14.00">Thrown up</text>
<text text-anchor="middle" x="271" y="-431.7" font-family="Times New Roman,serif" font-size="14.00">the stack</text>
</g>
<!-- fix3 -->
<g id="node18" class="node">
<title>fix3</title>
<polygon fill="lightblue" stroke="black" points="847.62,-86.75 694.38,-86.75 694.38,0 853.62,0 853.62,-80.75 847.62,-86.75"/>
<polyline fill="none" stroke="black" points="847.62,-86.75 847.62,-80.75"/>
<polyline fill="none" stroke="black" points="853.62,-80.75 847.62,-80.75"/>
<text text-anchor="middle" x="774" y="-69.45" font-family="Helvetica,sans-Serif" font-size="14.00">FIX 3 (Better Errors):</text>
<text text-anchor="middle" x="774" y="-53.7" font-family="Helvetica,sans-Serif" font-size="14.00">Detect ENOENT cause:</text>
<text text-anchor="middle" x="774" y="-37.95" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; Binary missing?</text>
<text text-anchor="middle" x="774" y="-22.2" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; Working dir missing?</text>
<text text-anchor="middle" x="774" y="-6.45" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; Permissions issue?</text>
</g>
<!-- enoent&#45;&gt;fix3 -->
<g id="edge19" class="edge">
<title>enoent&#45;&gt;fix3</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M774,-139.04C774,-126.11 774,-111.75 774,-98.2"/>
<polygon fill="blue" stroke="blue" points="777.5,-98.58 774,-88.58 770.5,-98.58 777.5,-98.58"/>
<text text-anchor="middle" x="810.75" y="-107.95" font-family="Times New Roman,serif" font-size="14.00">Improve here</text>
</g>
<!-- no_client -->
<g id="node14" class="node">
<title>no_client</title>
<path fill="red" stroke="black" d="M473.75,-517.25C473.75,-517.25 360.25,-517.25 360.25,-517.25 354.25,-517.25 348.25,-511.25 348.25,-505.25 348.25,-505.25 348.25,-493.25 348.25,-493.25 348.25,-487.25 354.25,-481.25 360.25,-481.25 360.25,-481.25 473.75,-481.25 473.75,-481.25 479.75,-481.25 485.75,-487.25 485.75,-493.25 485.75,-493.25 485.75,-505.25 485.75,-505.25 485.75,-511.25 479.75,-517.25 473.75,-517.25"/>
<text text-anchor="middle" x="417" y="-493.82" font-family="Helvetica,sans-Serif" font-size="14.00">No client connection</text>
</g>
<!-- no_server&#45;&gt;no_client -->
<g id="edge10" class="edge">
<title>no_server&#45;&gt;no_client</title>
<path fill="none" stroke="black" d="M416.21,-565.16C416.34,-554.67 416.5,-541.08 416.65,-529.04"/>
<polygon fill="black" stroke="black" points="420.15,-529.25 416.77,-519.21 413.15,-529.16 420.15,-529.25"/>
</g>
<!-- error_msgs -->
<g id="node15" class="node">
<title>error_msgs</title>
<path fill="red" stroke="black" d="M506.62,-410.5C506.62,-410.5 329.38,-410.5 329.38,-410.5 323.38,-410.5 317.38,-404.5 317.38,-398.5 317.38,-398.5 317.38,-383 317.38,-383 317.38,-377 323.38,-371 329.38,-371 329.38,-371 506.62,-371 506.62,-371 512.62,-371 518.62,-377 518.62,-383 518.62,-383 518.62,-398.5 518.62,-398.5 518.62,-404.5 512.62,-410.5 506.62,-410.5"/>
<text text-anchor="middle" x="418" y="-393.2" font-family="Helvetica,sans-Serif" font-size="14.00">All operations fail:</text>
<text text-anchor="middle" x="418" y="-377.45" font-family="Helvetica,sans-Serif" font-size="14.00">&#39;Client not connected to server&#39;</text>
</g>
<!-- no_client&#45;&gt;error_msgs -->
<g id="edge11" class="edge">
<title>no_client&#45;&gt;error_msgs</title>
<path fill="none" stroke="black" d="M417.16,-481.14C417.31,-465.34 417.53,-441.5 417.71,-422.42"/>
<polygon fill="black" stroke="black" points="421.21,-422.53 417.81,-412.49 414.21,-422.46 421.21,-422.53"/>
</g>
<!-- legend_ok -->
<g id="node19" class="node">
<title>legend_ok</title>
<path fill="lightgreen" stroke="black" d="M532.75,-1437.88C532.75,-1437.88 491.25,-1437.88 491.25,-1437.88 485.25,-1437.88 479.25,-1431.88 479.25,-1425.88 479.25,-1425.88 479.25,-1413.88 479.25,-1413.88 479.25,-1407.88 485.25,-1401.88 491.25,-1401.88 491.25,-1401.88 532.75,-1401.88 532.75,-1401.88 538.75,-1401.88 544.75,-1407.88 544.75,-1413.88 544.75,-1413.88 544.75,-1425.88 544.75,-1425.88 544.75,-1431.88 538.75,-1437.88 532.75,-1437.88"/>
<text text-anchor="middle" x="512" y="-1414.45" font-family="Helvetica,sans-Serif" font-size="14.00">Working</text>
</g>
<!-- legend_warn -->
<g id="node20" class="node">
<title>legend_warn</title>
<path fill="yellow" stroke="black" d="M655.25,-1437.88C655.25,-1437.88 574.75,-1437.88 574.75,-1437.88 568.75,-1437.88 562.75,-1431.88 562.75,-1425.88 562.75,-1425.88 562.75,-1413.88 562.75,-1413.88 562.75,-1407.88 568.75,-1401.88 574.75,-1401.88 574.75,-1401.88 655.25,-1401.88 655.25,-1401.88 661.25,-1401.88 667.25,-1407.88 667.25,-1413.88 667.25,-1413.88 667.25,-1425.88 667.25,-1425.88 667.25,-1431.88 661.25,-1437.88 655.25,-1437.88"/>
<text text-anchor="middle" x="615" y="-1414.45" font-family="Helvetica,sans-Serif" font-size="14.00">Potential Issue</text>
</g>
<!-- legend_error -->
<g id="node21" class="node">
<title>legend_error</title>
<path fill="red" stroke="black" d="M764.88,-1437.88C764.88,-1437.88 697.12,-1437.88 697.12,-1437.88 691.12,-1437.88 685.12,-1431.88 685.12,-1425.88 685.12,-1425.88 685.12,-1413.88 685.12,-1413.88 685.12,-1407.88 691.12,-1401.88 697.12,-1401.88 697.12,-1401.88 764.88,-1401.88 764.88,-1401.88 770.88,-1401.88 776.88,-1407.88 776.88,-1413.88 776.88,-1413.88 776.88,-1425.88 776.88,-1425.88 776.88,-1431.88 770.88,-1437.88 764.88,-1437.88"/>
<text text-anchor="middle" x="731" y="-1414.45" font-family="Helvetica,sans-Serif" font-size="14.00">Failure Point</text>
</g>
<!-- legend_fix -->
<g id="node22" class="node">
<title>legend_fix</title>
<path fill="lightblue" stroke="black" d="M878.75,-1437.88C878.75,-1437.88 807.25,-1437.88 807.25,-1437.88 801.25,-1437.88 795.25,-1431.88 795.25,-1425.88 795.25,-1425.88 795.25,-1413.88 795.25,-1413.88 795.25,-1407.88 801.25,-1401.88 807.25,-1401.88 807.25,-1401.88 878.75,-1401.88 878.75,-1401.88 884.75,-1401.88 890.75,-1407.88 890.75,-1413.88 890.75,-1413.88 890.75,-1425.88 890.75,-1425.88 890.75,-1431.88 884.75,-1437.88 878.75,-1437.88"/>
<text text-anchor="middle" x="843" y="-1414.45" font-family="Helvetica,sans-Serif" font-size="14.00">Proposed Fix</text>
</g>
</g>
</svg>
